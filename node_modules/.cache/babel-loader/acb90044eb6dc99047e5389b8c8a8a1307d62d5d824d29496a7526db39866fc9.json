{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{useParams}from'react-router-dom';import'../style/style.css';import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function UpdatePostForm(){const{id}=useParams();// Access the route parameter\nconst[isLoading,setIsLoading]=useState(true);const[error,setError]=useState(null);const navigate=useNavigate();const currentUserToken=localStorage.getItem('token');const[postData,setPostData]=useState({title:'',content:''});useEffect(()=>{const fetchData=async()=>{try{const response=await fetch('http://localhost:3000/posts');if(!response.ok){throw new Error('Network response was not ok.');}const result=await response.json();const currentPost=result.posts.filter(e=>{if(e._id===id){return e;}else{return error;}});setPostData(currentPost[0]);}catch(error){setError(error);}finally{setIsLoading(false);}};fetchData();},[error,id]);if(isLoading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}if(error){return/*#__PURE__*/_jsxs(\"div\",{children:[\"Error: \",error.message]});}const handleInputChange=e=>{const{name,value}=e.target;setPostData({...postData,[name]:value});};const handleSubmit=async e=>{e.preventDefault();try{const response=await fetch('http://localhost:3000/posts/'+id,{method:'PUT',headers:{'Content-Type':'application/json',Authorization:currentUserToken},body:JSON.stringify(postData)});if(!response.ok){throw new Error('Network response was not ok.');}// Handle success if needed\nnavigate(\"/posts/\"+id);}catch(error){console.error('Error posting data:',error);// Handle error state if needed\n}};return/*#__PURE__*/_jsxs(\"div\",{class:\"form-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Update Message\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,class:\"log-in-container\",action:\"/create-message\",method:\"POST\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"log-in-container\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"title\",children:\"Post Title\"}),/*#__PURE__*/_jsx(\"input\",{name:\"title\",type:\"text\",onChange:handleInputChange,value:postData.title})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"label-input-container\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"contetn\",children:\"Post Content\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"content\",name:\"content\",rows:\"4\",cols:\"50\",onChange:handleInputChange,value:postData.content})]}),/*#__PURE__*/_jsx(\"button\",{class:\"submit-button\",children:\"Submit\"})]})]});}","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","jsx","_jsx","jsxs","_jsxs","UpdatePostForm","id","isLoading","setIsLoading","error","setError","navigate","currentUserToken","localStorage","getItem","postData","setPostData","title","content","fetchData","response","fetch","ok","Error","result","json","currentPost","posts","filter","e","_id","children","message","handleInputChange","name","value","target","handleSubmit","preventDefault","method","headers","Authorization","body","JSON","stringify","console","class","onSubmit","action","for","type","onChange","rows","cols"],"sources":["C:/Users/17602/Documents/coding-exercises/TODP/Blog-Template/src/components/UpdatePostForm.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useParams } from 'react-router-dom';\r\nimport '../style/style.css';\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nexport default function UpdatePostForm() {\r\n    const { id } = useParams(); // Access the route parameter\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n    const navigate = useNavigate();\r\n    const currentUserToken = localStorage.getItem('token');\r\n    const [postData, setPostData] = useState({\r\n        title: '',\r\n        content: '',\r\n    });\r\n    \r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n          try {\r\n            const response = await fetch('http://localhost:3000/posts');\r\n            if (!response.ok) {\r\n              throw new Error('Network response was not ok.');\r\n            }\r\n            const result = await response.json();\r\n            const currentPost = result.posts.filter((e) => {\r\n              if (e._id === id) {\r\n                return e;\r\n              } else {\r\n                return error;\r\n              }\r\n            })\r\n            setPostData(currentPost[0]);\r\n          } catch (error) {\r\n            setError(error);\r\n          } finally {\r\n            setIsLoading(false);\r\n          }\r\n        };\r\n    \r\n        fetchData();\r\n      }, [error, id]);\r\n    \r\n      if (isLoading) {\r\n        return <div>Loading...</div>;\r\n      }\r\n    \r\n      if (error) {\r\n        return <div>Error: {error.message}</div>;\r\n      }\r\n\r\n    const handleInputChange = (e) => {\r\n        const { name, value } = e.target;\r\n        setPostData({ ...postData, [name]: value });\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        try {\r\n          const response = await fetch('http://localhost:3000/posts/'+id, {\r\n            method: 'PUT',\r\n            headers: {\r\n              'Content-Type': 'application/json',\r\n              Authorization: currentUserToken\r\n            },\r\n            body: JSON.stringify(postData),\r\n          });\r\n          if (!response.ok) {\r\n            throw new Error('Network response was not ok.');\r\n          }\r\n          // Handle success if needed\r\n          navigate(\"/posts/\"+id);\r\n        } catch (error) {\r\n          console.error('Error posting data:', error);\r\n          // Handle error state if needed\r\n        }\r\n      };\r\n\r\n    return (\r\n\r\n        <div class=\"form-container\">\r\n            <h1>Update Message</h1>\r\n                <form onSubmit={handleSubmit} class=\"log-in-container\" action=\"/create-message\" method=\"POST\">\r\n\r\n                    <div class=\"log-in-container\">\r\n                        <label for=\"title\">Post Title</label>\r\n                        <input\r\n                            name=\"title\"\r\n                            type=\"text\"\r\n                            onChange={handleInputChange}\r\n                            value={postData.title}\r\n                        />\r\n                    </div>\r\n\r\n                    <div class=\"label-input-container\">\r\n                        <label for=\"contetn\">Post Content</label>\r\n                        <textarea\r\n                            id=\"content\"\r\n                            name=\"content\"\r\n                            rows=\"4\"\r\n                            cols=\"50\"\r\n                            onChange={handleInputChange}\r\n                            value={postData.content}\r\n                        >\r\n                        </textarea>\r\n                    </div>\r\n\r\n                    <button class=\"submit-button\">\r\n                        Submit\r\n                    </button>\r\n\r\n                </form>\r\n        </div>\t\r\n\r\n    )\r\n}\r\n\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,SAAS,KAAQ,kBAAkB,CAC5C,MAAO,oBAAoB,CAC3B,OAASC,WAAW,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE/C,cAAe,SAAS,CAAAC,cAAcA,CAAA,CAAG,CACrC,KAAM,CAAEC,EAAG,CAAC,CAAGP,SAAS,CAAC,CAAC,CAAE;AAC5B,KAAM,CAACQ,SAAS,CAAEC,YAAY,CAAC,CAAGX,QAAQ,CAAC,IAAI,CAAC,CAChD,KAAM,CAACY,KAAK,CAAEC,QAAQ,CAAC,CAAGb,QAAQ,CAAC,IAAI,CAAC,CACxC,KAAM,CAAAc,QAAQ,CAAGX,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAAY,gBAAgB,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CACtD,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGnB,QAAQ,CAAC,CACrCoB,KAAK,CAAE,EAAE,CACTC,OAAO,CAAE,EACb,CAAC,CAAC,CAEFpB,SAAS,CAAC,IAAM,CACZ,KAAM,CAAAqB,SAAS,CAAG,KAAAA,CAAA,GAAY,CAC5B,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,6BAA6B,CAAC,CAC3D,GAAI,CAACD,QAAQ,CAACE,EAAE,CAAE,CAChB,KAAM,IAAI,CAAAC,KAAK,CAAC,8BAA8B,CAAC,CACjD,CACA,KAAM,CAAAC,MAAM,CAAG,KAAM,CAAAJ,QAAQ,CAACK,IAAI,CAAC,CAAC,CACpC,KAAM,CAAAC,WAAW,CAAGF,MAAM,CAACG,KAAK,CAACC,MAAM,CAAEC,CAAC,EAAK,CAC7C,GAAIA,CAAC,CAACC,GAAG,GAAKxB,EAAE,CAAE,CAChB,MAAO,CAAAuB,CAAC,CACV,CAAC,IAAM,CACL,MAAO,CAAApB,KAAK,CACd,CACF,CAAC,CAAC,CACFO,WAAW,CAACU,WAAW,CAAC,CAAC,CAAC,CAAC,CAC7B,CAAE,MAAOjB,KAAK,CAAE,CACdC,QAAQ,CAACD,KAAK,CAAC,CACjB,CAAC,OAAS,CACRD,YAAY,CAAC,KAAK,CAAC,CACrB,CACF,CAAC,CAEDW,SAAS,CAAC,CAAC,CACb,CAAC,CAAE,CAACV,KAAK,CAAEH,EAAE,CAAC,CAAC,CAEf,GAAIC,SAAS,CAAE,CACb,mBAAOL,IAAA,QAAA6B,QAAA,CAAK,YAAU,CAAK,CAAC,CAC9B,CAEA,GAAItB,KAAK,CAAE,CACT,mBAAOL,KAAA,QAAA2B,QAAA,EAAK,SAAO,CAACtB,KAAK,CAACuB,OAAO,EAAM,CAAC,CAC1C,CAEF,KAAM,CAAAC,iBAAiB,CAAIJ,CAAC,EAAK,CAC7B,KAAM,CAAEK,IAAI,CAAEC,KAAM,CAAC,CAAGN,CAAC,CAACO,MAAM,CAChCpB,WAAW,CAAC,CAAE,GAAGD,QAAQ,CAAE,CAACmB,IAAI,EAAGC,KAAM,CAAC,CAAC,CAC/C,CAAC,CAED,KAAM,CAAAE,YAAY,CAAG,KAAO,CAAAR,CAAC,EAAK,CAC9BA,CAAC,CAACS,cAAc,CAAC,CAAC,CAClB,GAAI,CACF,KAAM,CAAAlB,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,8BAA8B,CAACf,EAAE,CAAE,CAC9DiC,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,CACP,cAAc,CAAE,kBAAkB,CAClCC,aAAa,CAAE7B,gBACjB,CAAC,CACD8B,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC7B,QAAQ,CAC/B,CAAC,CAAC,CACF,GAAI,CAACK,QAAQ,CAACE,EAAE,CAAE,CAChB,KAAM,IAAI,CAAAC,KAAK,CAAC,8BAA8B,CAAC,CACjD,CACA;AACAZ,QAAQ,CAAC,SAAS,CAACL,EAAE,CAAC,CACxB,CAAE,MAAOG,KAAK,CAAE,CACdoC,OAAO,CAACpC,KAAK,CAAC,qBAAqB,CAAEA,KAAK,CAAC,CAC3C;AACF,CACF,CAAC,CAEH,mBAEIL,KAAA,QAAK0C,KAAK,CAAC,gBAAgB,CAAAf,QAAA,eACvB7B,IAAA,OAAA6B,QAAA,CAAI,gBAAc,CAAI,CAAC,cACnB3B,KAAA,SAAM2C,QAAQ,CAAEV,YAAa,CAACS,KAAK,CAAC,kBAAkB,CAACE,MAAM,CAAC,iBAAiB,CAACT,MAAM,CAAC,MAAM,CAAAR,QAAA,eAEzF3B,KAAA,QAAK0C,KAAK,CAAC,kBAAkB,CAAAf,QAAA,eACzB7B,IAAA,UAAO+C,GAAG,CAAC,OAAO,CAAAlB,QAAA,CAAC,YAAU,CAAO,CAAC,cACrC7B,IAAA,UACIgC,IAAI,CAAC,OAAO,CACZgB,IAAI,CAAC,MAAM,CACXC,QAAQ,CAAElB,iBAAkB,CAC5BE,KAAK,CAAEpB,QAAQ,CAACE,KAAM,CACzB,CAAC,EACD,CAAC,cAENb,KAAA,QAAK0C,KAAK,CAAC,uBAAuB,CAAAf,QAAA,eAC9B7B,IAAA,UAAO+C,GAAG,CAAC,SAAS,CAAAlB,QAAA,CAAC,cAAY,CAAO,CAAC,cACzC7B,IAAA,aACII,EAAE,CAAC,SAAS,CACZ4B,IAAI,CAAC,SAAS,CACdkB,IAAI,CAAC,GAAG,CACRC,IAAI,CAAC,IAAI,CACTF,QAAQ,CAAElB,iBAAkB,CAC5BE,KAAK,CAAEpB,QAAQ,CAACG,OAAQ,CAElB,CAAC,EACV,CAAC,cAENhB,IAAA,WAAQ4C,KAAK,CAAC,eAAe,CAAAf,QAAA,CAAC,QAE9B,CAAQ,CAAC,EAEP,CAAC,EACV,CAAC,CAGd"},"metadata":{},"sourceType":"module","externalDependencies":[]}